# æ¨¡å‹æ–‡ä»¶ç®¡ç†è¯´æ˜

## ğŸ“¦ æ¨¡å‹æ–‡ä»¶ç»“æ„

æœ¬é¡¹ç›®åŒ…å«å¤šä¸ªæ¨¡å‹æ–‡ä»¶ï¼Œç”±äºä½“ç§¯è¾ƒå¤§ï¼Œ**ä¸åº”æäº¤åˆ° Git ä»“åº“**ã€‚

### æ¨¡å‹åˆ—è¡¨

```
xiezhi/
â”œâ”€â”€ intent_classifier_lr.pkl      # ä¼ ç»Ÿ ML æ¨¡å‹ï¼ˆscikit-learnï¼‰
â”œâ”€â”€ best_intent_model/            # BERT å¾®è°ƒåçš„æœ€ä½³æ¨¡å‹
â”‚   â””â”€â”€ model.safetensors         # PyTorch æ¨¡å‹æƒé‡
â””â”€â”€ onnx_model/                   # ONNX æ ¼å¼ï¼ˆç”¨äºç”Ÿäº§éƒ¨ç½²ï¼‰
    â””â”€â”€ model.onnx                # ONNX æ¨¡å‹æ–‡ä»¶
```

---

## ğŸš€ å¦‚ä½•è·å–æ¨¡å‹

### æ–¹æ³• 1ï¼šæœ¬åœ°è®­ç»ƒç”Ÿæˆ

#### 1.1 è®­ç»ƒä¼ ç»Ÿ ML æ¨¡å‹
```bash
# æ¿€æ´» xiezhi ç¯å¢ƒ
conda activate xiezhi

# è¿è¡Œè®­ç»ƒè„šæœ¬
python xiezhi-ml.py
```
**è¾“å‡º**ï¼š`intent_classifier_lr.pkl`

#### 1.2 è®­ç»ƒ BERT æ¨¡å‹
```bash
# æ¿€æ´» xiezhi ç¯å¢ƒ
conda activate xiezhi

# è¿è¡Œå¾®è°ƒè„šæœ¬
python xiezhi_bert_x.py
```
**è¾“å‡º**ï¼š`best_intent_model/` ç›®å½•

#### 1.3 å¯¼å‡º ONNX æ¨¡å‹
```bash
# æ¿€æ´» xiezhi ç¯å¢ƒ
conda activate xiezhi

# è¿è¡Œå¯¼å‡ºè„šæœ¬
build_xiezhi_bert.bat
```
**è¾“å‡º**ï¼š`onnx_model/` ç›®å½•

---

### æ–¹æ³• 2ï¼šä»å›¢é˜Ÿå…±äº«è·å–

å¦‚æœæ‚¨çš„å›¢é˜Ÿä½¿ç”¨å¤–éƒ¨å­˜å‚¨ï¼ˆå¦‚ AWS S3ã€é˜¿é‡Œäº‘ OSSã€æˆ–ç½‘ç›˜ï¼‰ï¼š

```bash
# ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹ï¼ˆç¤ºä¾‹ï¼‰
# wget https://your-storage-url/models/best_intent_model.zip
# unzip best_intent_model.zip
```

---

## ğŸ“ æ¨¡å‹ç‰ˆæœ¬ç®¡ç†å»ºè®®

### æ¨èæ–¹æ¡ˆ 1ï¼šGit LFSï¼ˆå¤§æ–‡ä»¶å­˜å‚¨ï¼‰
```bash
# å®‰è£… Git LFS
git lfs install

# è·Ÿè¸ªæ¨¡å‹æ–‡ä»¶
git lfs track "*.pkl"
git lfs track "*.onnx"
git lfs track "*.safetensors"

# æäº¤ .gitattributes
git add .gitattributes
git commit -m "Add Git LFS tracking"
```

### æ¨èæ–¹æ¡ˆ 2ï¼šDVCï¼ˆæ•°æ®ç‰ˆæœ¬æ§åˆ¶ï¼‰
```bash
# å®‰è£… DVC
pip install dvc

# åˆå§‹åŒ– DVC
dvc init

# è·Ÿè¸ªæ¨¡å‹æ–‡ä»¶
dvc add best_intent_model/
dvc add onnx_model/

# é…ç½®è¿œç¨‹å­˜å‚¨
dvc remote add -d storage s3://your-bucket/models
```

### æ¨èæ–¹æ¡ˆ 3ï¼šå¤–éƒ¨å­˜å‚¨
å°†æ¨¡å‹ä¸Šä¼ åˆ°ï¼š
- **AWS S3**
- **é˜¿é‡Œäº‘ OSS**
- **Azure Blob Storage**
- **ç™¾åº¦ç½‘ç›˜**ï¼ˆå°å›¢é˜Ÿï¼‰

---

## ğŸ”„ æ¨¡å‹æ›´æ–°æµç¨‹

1. **è®­ç»ƒæ–°æ¨¡å‹**
2. **è¯„ä¼°æ€§èƒ½**ï¼ˆç¡®ä¿ä¼˜äºæ—§æ¨¡å‹ï¼‰
3. **å¤‡ä»½æ—§æ¨¡å‹**
4. **æ›´æ–°æ¨¡å‹æ–‡ä»¶**
5. **æ›´æ–°ç‰ˆæœ¬æ–‡æ¡£**
6. **é€šçŸ¥å›¢é˜Ÿæˆå‘˜**

---

## ğŸ“ å½“å‰æ¨¡å‹ä¿¡æ¯

### BERT æ„å›¾åˆ†ç±»æ¨¡å‹

| é¡¹ç›® | ä¿¡æ¯ |
|------|------|
| **æ¨¡å‹ç±»å‹** | RBT3ï¼ˆä¸­æ–‡ BERTï¼‰ |
| **ä»»åŠ¡** | äºŒåˆ†ç±»ï¼ˆå¯¿é™©æ„å›¾è¯†åˆ«ï¼‰ |
| **è®­ç»ƒæ•°æ®** | data/intent_data_label.csv (57 æ ·æœ¬) |
| **å‡†ç¡®ç‡** | ~95%+ (æµ‹è¯•é›†) |
| **æ¨¡å‹å¤§å°** | ~156MB (PyTorch) / ~156MB (ONNX) |
| **æ¨ç†é€Ÿåº¦** | ~50-200ms (CPU) / ~10-30ms (GPU) |

### ä¼ ç»Ÿ ML æ¨¡å‹

| é¡¹ç›® | ä¿¡æ¯ |
|------|------|
| **æ¨¡å‹ç±»å‹** | TF-IDF + Logistic Regression |
| **ä»»åŠ¡** | äºŒåˆ†ç±»ï¼ˆå¯¿é™©æ„å›¾è¯†åˆ«ï¼‰ |
| **è®­ç»ƒæ•°æ®** | data/intent_data_label.csv |
| **æ¨¡å‹å¤§å°** | ~4KB |
| **æ¨ç†é€Ÿåº¦** | ~1-5ms |

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸è¦æäº¤å¤§æ–‡ä»¶åˆ° Git**
   - æ¨¡å‹æ–‡ä»¶ï¼ˆ.pkl, .onnx, .safetensorsï¼‰
   - è®­ç»ƒæ£€æŸ¥ç‚¹ï¼ˆresults/ï¼‰
   
2. **ä¿æŠ¤æ•æ„Ÿæ•°æ®**
   - å¦‚æœè®­ç»ƒæ•°æ®åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œè€ƒè™‘åŠ å¯†å­˜å‚¨
   
3. **æ–‡æ¡£åŒ–æ›´æ–°**
   - æ¯æ¬¡æ›´æ–°æ¨¡å‹æ—¶ï¼Œæ›´æ–°æ­¤æ–‡æ¡£
   - è®°å½•æ¨¡å‹æ€§èƒ½æŒ‡æ ‡

---

## ğŸ“ é—®é¢˜åé¦ˆ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

